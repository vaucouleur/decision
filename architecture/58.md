Here’s a simple **test prelude** so each test file can just do:

```rust
use crate::prelude::*;
```

…and get all your helpers/macros in scope.

---

## 1) Create `prelude.rs`

### `crates/smt-tests/src/prelude.rs`

```rust
#![forbid(unsafe_code)]

// Re-export common types used by tests
pub use smt_api::CheckSat;
pub use smt_engine::config::SharingConfig;

// Re-export helper modules (functions/types)
pub use crate::bundle_on_failure::{assert_sat_with_bundle_on_mismatch, Expect};
pub use crate::core_assert::{assert_unsat_core_contains_any, CoreReq};

// Re-export macros from the crate root (macros are exported with #[macro_export])
// You don't need to `pub use` macros explicitly, but importing the crate prelude
// makes it clearer what a test depends on.
pub use crate::{
    assert_eqshare_dir,
    assert_eqshare_dir_none,
    assert_eqshare_events_empty,
    assert_eqshare_hop,
    assert_eqshare_hop_any,
    assert_eqshare_hop_none,
};
```

> Note: macros exported with `#[macro_export]` live at the crate root namespace, so `pub use crate::assert_...;` works.

---

## 2) Wire it into your crate root

### `crates/smt-tests/src/lib.rs`

```rust
pub mod prelude;

pub mod bundle_on_failure;
pub mod core_assert;
pub mod eqshare_macros;
pub mod trace_assert; // if you still use it elsewhere
pub mod common;
// ... other modules
```

---

## 3) Use it in tests

### `crates/smt-tests/src/equality_sharing_golden.rs`

```rust
use crate::prelude::*;
use crate::common::make_session;

// now you can just use Expect, CoreReq, SharingConfig, and all assert_eqshare_* macros
```

---

## Optional: also re-export your common builders / instance setup helpers

If you find yourself always importing `make_session`, you can re-export it too:

In `prelude.rs`:

```rust
pub use crate::common::make_session;
```

Then test files need only:

```rust
use crate::prelude::*;
```

---

If you want, I can show a final “one-liner” style for the golden tests using the prelude (very compact and readable), but what you have already is perfectly fine for CI.
